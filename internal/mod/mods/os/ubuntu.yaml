name: ubuntu
description: Ubuntu base image with core dependencies
category: os
dockerfile_from: ubuntu:24.04
provides:
  - base

run_as_root: |
  # Avoid interactive prompts during package installation
  export DEBIAN_FRONTEND=noninteractive

  # Install core packages
  apt-get update && apt-get install -y \
    curl \
    wget \
    git \
    build-essential \
    software-properties-common \
    unzip \
    ca-certificates \
    gnupg \
    sudo \
    jq \
    libffi-dev \
    libyaml-dev \
    && rm -rf /var/lib/apt/lists/*

  # Configure the ubuntu user (UID 1000, already exists in ubuntu:24.04)
  echo "ubuntu ALL=(root) NOPASSWD:ALL" > /etc/sudoers.d/ubuntu
  chmod 0440 /etc/sudoers.d/ubuntu
  mkdir -p /home/ubuntu/.local/bin
  chown -R ubuntu:ubuntu /home/ubuntu
